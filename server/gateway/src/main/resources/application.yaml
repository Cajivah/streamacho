eureka:
  client:
    registerWithEureka: true
    fetchRegistry: true
    server:
      waitTimeInMsWhenSyncEmpty: 0
    serviceUrl:
      defaultZone: ${discovery-service.uri:http://localhost:8761/eureka/}
  instance:
    prefer-ip-address: true
spring:
  application:
    name: gateway
  cloud:
    gateway:
      discovery:
        locator:
          enabled: true
      routes:
      - id: streamacho-security
        uri: lb://streamacho-security
        predicates:
        - Path=/api/users/**
      - id: streamacho-security
        uri: lb://streamacho-meetings
        predicates:
        - Path=/api/meetings/**
      - id: streamacho-chat-ws
        order: 8888
        uri: lb:ws://streamacho-chat
        predicates:
        - Path=/api/chat/**
      - id: streamacho-chat
        uri: lb://streamacho-chat
        predicates:
        - Path=/api/chat/**
      - id: streamacho-chat-db
        uri: lb://streamcho-chat-db
        predicates:
        - Path=/api/chat-db/**

server:
  port: 8888

logging:
  level:
    org.springframework.cloud.gateway: TRACE
